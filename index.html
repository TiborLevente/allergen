<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Allergén szűrős recept ajánló</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #e6f0f3;
    color: #334;
    margin: 20px;
    padding: 0;
  }
  h1 {
    text-align: center;
    color: #2c7a7b;
    margin-bottom: 0.5em;
  }
  .filters {
    margin-bottom: 20px;
  }
  .filter-group {
    margin-bottom: 15px;
  }
  .filter-group label {
    font-weight: bold;
    display: block;
    margin-bottom: 5px;
    color: #2c7a7b;
  }
  .checkbox-list {
    display: flex;
    flex-wrap: wrap;
    gap: 12px 20px;
  }
  .checkbox-list label {
    display: flex;
    align-items: center;
    cursor: pointer;
    user-select: none;
    background: #d3f0f3;
    padding: 5px 10px;
    border-radius: 6px;
    font-size: 0.9em;
    color: #1f4e5f;
    transition: background-color 0.2s;
  }
  .checkbox-list label:hover {
    background: #a9d7dd;
  }
  .checkbox-list input[type="checkbox"] {
    margin-right: 6px;
    cursor: pointer;
  }
  /* Étkezési típusok külön sorban */
  .mealtype-list {
    display: flex;
    gap: 25px;
    margin-top: 5px;
  }
  .mealtype-list label {
    background: #c7e9f1;
    padding: 6px 16px;
    border-radius: 8px;
    font-weight: 600;
    color: #256d7b;
    cursor: pointer;
    user-select: none;
    font-size: 1em;
  }
  .mealtype-list label:hover {
    background: #94cddb;
  }
  .mealtype-list input[type="checkbox"] {
    margin-right: 8px;
    cursor: pointer;
  }

  #recipe-list {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(320px,1fr));
    gap: 18px;
  }
  .recipe-card {
    background: white;
    border-radius: 10px;
    box-shadow: 0 0 12px rgba(0,0,0,0.06);
    padding: 15px 20px;
    transition: box-shadow 0.3s;
  }
  .recipe-card:hover {
    box-shadow: 0 0 16px rgba(0,0,0,0.14);
  }
  .recipe-name {
    font-weight: 700;
    font-size: 1.2em;
    margin-bottom: 8px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }
  .category-label {
    font-size: 0.85em;
    padding: 2px 9px;
    border-radius: 20px;
    color: white;
    user-select: none;
    display: inline-flex;
    align-items: center;
    gap: 5px;
  }
  .category-reggeli {
    background: #3b82f6;
  }
  .category-ebed {
    background: #16a34a;
  }
  .category-vacsora {
    background: #d97706;
  }
  .toggle-details-btn {
    background: none;
    border: none;
    color: #1e40af;
    cursor: pointer;
    margin-bottom: 10px;
    font-weight: 600;
  }
  .details-panel {
    font-size: 0.9em;
    line-height: 1.3;
    color: #334;
    display: none;
    border-top: 1px solid #ccc;
    padding-top: 10px;
  }
  .details-panel.open {
    display: block;
  }
  .details-row {
    margin-bottom: 6px;
  }
  /* Reszponzív */
  @media (max-width: 480px) {
    .checkbox-list {
      gap: 8px 12px;
    }
    .mealtype-list {
      justify-content: center;
    }
  }
</style>
</head>
<body>

<h1>Receptajánló allergének és étkezés szerint</h1>

<div class="filters">
  <div class="filter-group">
    <label>Allergének (többet is választhatsz):</label>
    <div class="checkbox-list" id="allergens-filter">
      <!-- Checkboxok ide kerülnek a script által -->
    </div>
  </div>
  <div class="filter-group">
    <label>Étkezési típus:</label>
    <div class="mealtype-list" id="mealtype-filter">
      <label><input type="checkbox" value="reggeli" /> Reggeli</label>
      <label><input type="checkbox" value="ebed" /> Ebéd</label>
      <label><input type="checkbox" value="vacsora" /> Vacsora</label>
    </div>
  </div>
</div>

<div id="recipe-list"></div>

<script>
  // 20 allergén, példaként
  const allergens = [
    {id:"gluten", name:"Glutén", icon:"??"},
    {id:"tojás", name:"Tojás", icon:"??"},
    {id:"tej", name:"Tej", icon:"??"},
    {id:"földimogyoró", name:"Földimogyoró", icon:"??"},
    {id:"diófélék", name:"Diófélék", icon:"??"},
    {id:"szója", name:"Szója", icon:"??"},
    {id:"hal", name:"Hal", icon:"??"},
    {id:"rák", name:"Rák", icon:"??"},
    {id:"csillagfürt", name:"Csillagfürt", icon:"??"},
    {id:"zeller", name:"Zeller", icon:"??"},
    {id:"mustár", name:"Mustár", icon:"??"},
    {id:"szezám", name:"Szezám", icon:"??"},
    {id:"kén-dioxid", name:"Kén-dioxid", icon:"??"},
    {id:"lupin", name:"Lupin", icon:"??"},
    {id:"puhatestűek", name:"Puhatestűek", icon:"??"},
    {id:"cukor", name:"Cukor", icon:"??"},
    {id:"szójalecitin", name:"Szójalecitin", icon:"??"},
    {id:"gluténmentes", name:"Gluténmentes", icon:"?"},
    {id:"tejfehérje", name:"Tejfehérje", icon:"??"},
    {id:"marhahús", name:"Marhahús", icon:"??"}
  ];

  // 60 recept, mindegyikhez meg kell adni allergéneket, étkezési típusokat, stb.
  // Itt példaként csak 20-at mutatok, bővítheted tetszés szerint!
  const recipes = [
    {id:1, name:"Rántotta zöldségekkel", allergens:["tojás", "tej"], mealType:["reggeli"], portion:"1 adag (200 g)", time:"15 perc", calories:250, ingredients:["tojás", "paradicsom", "paprika", "vaj"],},
    {id:2, name:"Gulyásleves", allergens:[], mealType:["ebed"], portion:"1 adag (350 ml)", time:"60 perc", calories:350, ingredients:["marhahús", "burgonya", "sárgarépa", "hagyma", "fűszerek"]},
    {id:3, name:"Túrós csusza", allergens:["gluten", "tej"], mealType:["ebed"], portion:"1 adag (300 g)", time:"40 perc", calories:480, ingredients:["tészta", "túró", "tejföl", "só", "szalonna"]},
    {id:4, name:"Csirkemell saláta", allergens:[], mealType:["ebed", "vacsora"], portion:"1 adag (250 g)", time:"20 perc", calories:320, ingredients:["csirkemell", "saláta", "paradicsom", "uborka", "olívaolaj"]},
    {id:5, name:"Zabkása gyümölcsökkel", allergens:["tej"], mealType:["reggeli"], portion:"1 adag (250 g)", time:"10 perc", calories:280, ingredients:["zabpehely", "tej", "méz", "gyümölcsök"]},
    {id:6, name:"Rakott krumpli", allergens:["tojás", "tej"], mealType:["ebed"], portion:"1 adag (300 g)", time:"60 perc", calories:420, ingredients:["burgonya", "tojás", "tejföl", "kolbász"]},
    {id:7, name:"Paradicsomos káposzta", allergens:[], mealType:["vacsora"], portion:"1 adag (250 g)", time:"35 perc", calories:190, ingredients:["káposzta", "paradicsom", "hagyma", "fűszerek"]},
    {id:8, name:"Csokis muffin", allergens:["gluten", "tojás", "tej"], mealType:["reggeli"], portion:"1 muffin (90 g)", time:"30 perc", calories:320, ingredients:["liszt", "csokoládé", "tojás", "tej", "cukor"]},
    {id:9, name:"Lencsefőzelék", allergens:[], mealType:["ebed", "vacsora"], portion:"1 adag (300 g)", time:"50 perc", calories:270, ingredients:["lencse", "hagyma", "fűszerek", "tejföl"]},
    {id:10, name:"Grillezett hal", allergens:["hal"], mealType:["ebed", "vacsora"], portion:"1 adag (200 g)", time:"25 perc", calories:350, ingredients:["hal", "citrom", "olívaolaj", "fűszerek"]},
    {id:11, name:"Tojásos nokedli", allergens:["tojás", "gluten"], mealType:["ebed"], portion:"1 adag (300 g)", time:"25 perc", calories:400, ingredients:["tojás", "liszt", "só", "vaj"]},
    {id:12, name:"Borsófőzelék", allergens:[], mealType:["vacsora"], portion:"1 adag (280 g)", time:"40 perc", calories:230, ingredients:["borsó", "hagyma", "tejföl", "liszt"]},
    {id:13, name:"Töltött paprika", allergens:["tej"], mealType:["ebed"], portion:"1 adag (350 g)", time:"60 perc", calories:400, ingredients:["paprika", "darált hús", "rizs", "tejföl"]},
    {id:14, name:"Csirkepaprikás nokedlivel", allergens:["tojás", "gluten", "tej"], mealType:["ebed"], portion:"1 adag (400 g)", time:"60 perc", calories:600, ingredients:["csirke", "paprika", "liszt", "tojás", "tejföl"]},
    {id:15, name:"Zöldséges omlett", allergens:["tojás"], mealType:["reggeli"], portion:"1 adag (220 g)", time:"15 perc", calories:270, ingredients:["tojás", "paradicsom", "paprika", "só"]},
    {id:16, name:"Rizses hús", allergens:[], mealType:["ebed"], portion:"1 adag (350 g)", time:"50 perc", calories:450, ingredients:["csirke", "rizs", "paradicsom", "fűszerek"]},
    {id:17, name:"Csirke saláta", allergens:[], mealType:["vacsora"], portion:"1 adag (220 g)", time:"20 perc", calories:300, ingredients:["csirke", "saláta", "uborka", "olívaolaj"]},
    {id:18, name:"Almás pite", allergens:["gluten", "tojás", "tej"], mealType:["reggeli"], portion:"1 szelet (100 g)", time:"50 perc", calories:350, ingredients:["liszt", "alma", "tojás", "cukor", "vaj"]},
    {id:19, name:"Sült zöldségek", allergens:[], mealType:["vacsora"], portion:"1 adag (250 g)", time:"35 perc", calories:200, ingredients:["padlizsán", "cukkini", "paradicsom", "olívaolaj"]},
    {id:20, name:"Csokis zabkeksz", allergens:["gluten", "tej"], mealType:["reggeli"], portion:"2 db (70 g)", time:"25 perc", calories:280, ingredients:["zabpehely", "csokoládé", "vaj", "cukor"]}
  ];

  // Allergének megjelenítése vízszintesen
  const allergenContainer = document.getElementById('allergens-filter');
  allergens.forEach(a => {
    const label = document.createElement('label');
    label.innerHTML = `<input type="checkbox" value="${a.id}"/> ${a.icon} ${a.name}`;
    allergenContainer.appendChild(label);
  });

  // Filter checkboxok lekérése
  const allergenCheckboxes = allergenContainer.querySelectorAll('input[type=checkbox]');
  const mealtypeContainer = document.getElementById('mealtype-filter');
  const mealtypeCheckboxes = mealtypeContainer.querySelectorAll('input[type=checkbox]');
  const recipeList = document.getElementById('recipe-list');

  // Recept kártyák kirajzolása a szűrés alapján
  function renderRecipes() {
    // Kiválasztott allergének
    const selectedAllergens = Array.from(allergenCheckboxes)
      .filter(cb => cb.checked)
      .map(cb => cb.value);

    // Kiválasztott étkezések
    const selectedMeals = Array.from(mealtypeCheckboxes)
      .filter(cb => cb.checked)
      .map(cb => cb.value);

    // Ha nincs étkezési típus választva, mutassuk az összes receptet
    const showAllMeals = selectedMeals.length === 0;

    // Szűrés
    const filtered = recipes.filter(r => {
      // Allergén szűrés: ha a recept tartalmaz bármelyik kiválasztott allergént, kizárjuk
      const allergenConflict = selectedAllergens.some(a => r.allergens.includes(a));
      if(allergenConflict) return false;

      // Étkezés szerinti szűrés
      if(showAllMeals) return true;
      return r.mealType.some(mt => selectedMeals.includes(mt));
    });

    // Ürítjük az előző listát
    recipeList.innerHTML = "";

    if(filtered.length === 0) {
      recipeList.innerHTML = "<p>Nincs találat a megadott szűrők alapján.</p>";
      return;
    }

    // Kirajzolás
    filtered.forEach(r => {
      const card = document.createElement('div');
      card.className = 'recipe-card';

      // Étkezési típus címke készítése (kék: reggeli, zöld: ebéd, narancs: vacsora)
      const mealLabels = r.mealType.map(mt => {
        let cls = '';
        if(mt === 'reggeli') cls = 'category-reggeli';
        else if(mt === 'ebed') cls = 'category-ebed';
        else if(mt === 'vacsora') cls = 'category-vacsora';
        return `<span class="category-label ${cls}">${mt.charAt(0).toUpperCase()+mt.slice(1)}</span>`;
      }).join(' ');

      card.innerHTML = `
        <div class="recipe-name">${r.name} ${mealLabels}</div>
        <button class="toggle-details-btn">Részletek megjelenítése</button>
        <div class="details-panel">
          <div class="details-row"><strong>Adag:</strong> ${r.portion}</div>
          <div class="details-row"><strong>Elkészítési idő:</strong> ${r.time}</div>
          <div class="details-row"><strong>Kalória:</strong> ${r.calories} kcal</div>
          <div class="details-row"><strong>Hozzávalók:</strong> ${r.ingredients.join(', ')}</div>
          <div class="details-row"><strong>Allergének:</strong> ${r.allergens.length ? r.allergens.map(aid => {
            const a = allergens.find(x => x.id === aid);
            return a ? `${a.icon} ${a.name}` : aid;
          }).join(', ') : 'Nincs'}</div>
        </div>
      `;

      // Részletek gomb kezelő
      const btn = card.querySelector('.toggle-details-btn');
      const details = card.querySelector('.details-panel');
      btn.addEventListener('click', () => {
        const isOpen = details.classList.toggle('open');
        btn.textContent = isOpen ? 'Részletek elrejtése' : 'Részletek megjelenítése';
      });

      recipeList.appendChild(card);
    });
  }

  // Események figyelése
  allergenCheckboxes.forEach(cb => cb.addEventListener('change', renderRecipes));
  mealtypeCheckboxes.forEach(cb => cb.addEventListener('change', renderRecipes));

  // Első render
  renderRecipes();
</script>

</body>
</html>
